"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();!function(){function t(){var t=new Date;h=w(t-f).substr(3,5),document.getElementById("div_puntuacion").innerHTML="<h4>"+n+"</h4>",document.getElementById("div_tiemtpo").innerHTML="<h4>"+h+"</h4>",function(){var t=[],e={nombre:function(t,e){return Math.round(Math.random()*(e-t)+t)}(0,9999),puntaje:n,tiempo:h},i=localStorage.KEY_MIS_RESULTADOS;i&&(t=JSON.parse(i));t.length>4&&t.splice(t.length-1,1);t.push(e),console.log(t.length),localStorage.KEY_MIS_RESULTADOS=JSON.stringify(t)}(),$("#modalp").modal("show")}function e(t){v=v.filter(function(e){return t!==e})}function i(t,e){return t.x==e.x&&t.y==e.y}var n=0,h=0,a=function(){function t(){_classCallCheck(this,t)}return _createClass(t,null,[{key:"get",value:function(t,e){return Math.floor(Math.random()*e)+t}}]),t}(),o=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"setPuntuacion",value:function(){d.innerHTML='<h1 class="text_puntuacion">'+n+"</h1>"}}]),t}(),s=function(){function t(e,i){_classCallCheck(this,t),this.x=e,this.y=i,this.width=10,this.height=10}return _createClass(t,[{key:"draw",value:function(){l.fillRect(this.x,this.y,this.width,this.height)}}],[{key:"generate",value:function(){return new t(a.get(0,500),a.get(0,300))}}]),t}(),c=function(){function t(e,i){_classCallCheck(this,t),this.x=e,this.y=i,this.width=10,this.height=10,this.back=null}return _createClass(t,[{key:"draw",value:function(){l.fillRect(this.x,this.y,this.width,this.height),this.hasBack()&&this.back.draw()}},{key:"add",value:function(){if(this.hasBack())return this.back.add();this.back=new t(this.x,this.y)}},{key:"hasBack",value:function(){return null!==this.back}},{key:"copy",value:function(){this.hasBack()&&(this.back.copy(),this.back.x=this.x,this.back.y=this.y)}},{key:"right",value:function(){this.copy(),this.x+=10}},{key:"left",value:function(){this.copy(),this.x-=10}},{key:"up",value:function(){this.copy(),this.y-=10}},{key:"down",value:function(){this.copy(),this.y+=10}},{key:"hit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!(this===t&&!this.hasBack())&&(this===t?this.back.hit(t,!0):!(e&&!this.hasBack())&&(e?this.back.hit(t):this.hasBack()?i(this,t)||this.back.hit(t):i(this,t)))}},{key:"hitBorder",value:function(){return this.x>490||this.x<0||this.y>290||this.y<0}}]),t}(),r=function(){function t(){_classCallCheck(this,t),this.head=new c(100,0),this.draw(),this.direction="right",this.head.add(),this.head.add(),this.head.add(),this.head.add(),this.head.add(),this.head.add()}return _createClass(t,[{key:"draw",value:function(){this.head.draw()}},{key:"right",value:function(){"left"!==this.direction&&(this.direction="right")}},{key:"left",value:function(){"right"!==this.direction&&(this.direction="left")}},{key:"up",value:function(){"down"!==this.direction&&(this.direction="up")}},{key:"down",value:function(){"up"!==this.direction&&(this.direction="down")}},{key:"move",value:function(){return"up"===this.direction?this.head.up():"down"===this.direction?this.head.down():"left"===this.direction?this.head.left():"right"===this.direction?this.head.right():void 0}},{key:"eat",value:function(){n+=10,k.setPuntuacion(),this.head.add()}},{key:"dead",value:function(){return this.head.hit(this.head)||this.head.hitBorder()}}]),t}(),u=document.getElementById("canvas"),d=document.getElementById("puntuacion");document.getElementById("btn_volver_jugar").onclick=function(){console.log("onclick volver a jugar"),location.reload(!0)};var l=u.getContext("2d"),f=new Date;l.fillStyle="white";var y=new r,v=[],k=new o;k.setPuntuacion(),window.addEventListener("keydown",function(t){return t.keyCode>36&&t.keyCode<41&&t.preventDefault(),40===t.keyCode?y.down():39===t.keyCode?y.right():38===t.keyCode?y.up():37===t.keyCode&&y.left()});var g=setInterval(function(){y.move(),l.clearRect(0,0,u.width,u.height),y.draw(),function(){for(var t in v){var i=v[t];void 0!==i&&(i.draw(),function(t,e){var i=!1;return e.x+e.width>=t.x&&e.x<t.x+t.width&&e.y+e.height>=t.y&&e.y<t.y+t.height&&(i=!0),e.x<=t.x&&e.x+e.width>=t.x+t.width&&e.y<=t.y&&e.y+e.height>=t.y+t.height&&(i=!0),t.x<=e.x&&t.x+t.width>=e.x+e.width&&t.y<=e.y&&t.y+t.height>=e.y+e.height&&(i=!0),i}(i,y.head)&&(y.eat(),e(i)))}}(),y.dead()&&(console.log(" GamerOver"),t(),window.clearInterval(g))},200);setInterval(function(){var t=s.generate();v.push(t),setTimeout(function(){e(t)},1e4)},4e3);var w=function(t){function e(t){return(t<10?"0":"")+t}var i=t%1e3,n=(t=(t-i)/1e3)%60,h=(t=(t-n)/60)%60;return e((t-h)/60)+":"+e(h)+":"+e(n)+"."+e(i)}}();